# Coding Guidelines â€” Code Organization ğŸ§‘â€ğŸ’»

This document defines Smileâ€™s C coding style and file organization conventions
to ensure consistency, readability, and maintainability across all modules.

Smileâ€™s general conventions define the foundational coding habits that keep the
codebase clean, predictable, and safe.
These standards ensure uniformity in naming, structure, and formatting across
all modules.

> **Note:**  
> Smile follows the **C23 standard** for all C source code and headers.  
> All examples and conventions in this document assume C23-compatible compilers
> (e.g., Clang â‰¥ 17, GCC â‰¥ 13, or MSVC â‰¥ 19.3).  
> Features like `nullptr` and `bool` are used accordingly.


---

<br>

## Table of Contents

- [Code Organization](#-code-organization)
    - [Public Headers](#-_public-headers_)
    - [Internal Headers](#-_internal-headers_)
    - [Message Files](#-_message-files_)
    - [Source Files](#-_source-files_)

---

<br>

## ğŸ—‚ Code Organization

All code-related Smile files should be split into sections that follow the
pattern below.

Each section should be separated by a "section header" like the following:

```c
// -----------------------------------------------------------------------------
// Includes
// -----------------------------------------------------------------------------
```

After the last line of a given section, skip 2 lines until the header of the
next one. Sections that might not be relevant to a certain file can be omitted.

Below is a structural Example

```c
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// Includes
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

#include <> â€” External libraries (e.g., stdlib.h, string.h) 

#include "" â€” Related to the current module (e.g., StateMachine.h, StateMachineInternal.h)

#include "" â€” Files that support the current module (e.g., LogInternal, TestInternal.h)


// â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// Defines
// â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 
#defines 


// -----------------------------------------------------------------------------
// Data Types
// -----------------------------------------------------------------------------

Data Types (e.g., enums, structs)


// -----------------------------------------------------------------------------
// Variables
// -----------------------------------------------------------------------------

Variables


// -----------------------------------------------------------------------------
// Prototypes
// -----------------------------------------------------------------------------

Prototypes

// -----------------------------------------------------------------------------
// Functions â€” Public
// -----------------------------------------------------------------------------

Public Functions definitions


// -----------------------------------------------------------------------------
// Functions â€” Internal
// -----------------------------------------------------------------------------

Internal Functions definitions


// -----------------------------------------------------------------------------
// Functions â€” Private
// -----------------------------------------------------------------------------

Private Functions definitions


// -----------------------------------------------------------------------------
// Main
// -----------------------------------------------------------------------------

main() Function
```

Below is an example using the StateMachine module:

```c
// -----------------------------------------------------------------------------
// Includes
// -----------------------------------------------------------------------------

#include <string.h>
#include <../external/uthash.h>

#include "../include/StateMachine.h"
#include "StateMachineInternal.h"
#include "StateMachineMessages.h"

#include "../src/Log/LogInternal.h"
#include "../src/_Internal/Common/CommonInternalMessages.h"
#include "../src/_Internal/Test/TestInternal.h"

// -----------------------------------------------------------------------------
// Variables
// -----------------------------------------------------------------------------

static StateMachineTracker *tracker;


// -----------------------------------------------------------------------------
// Prototypes
// -----------------------------------------------------------------------------

static bool smPrivateHasStarted(const char *fnName);

static bool smPrivateIsNameValid(const char *name, const char *fnName);


// -----------------------------------------------------------------------------
// Functions - Public
// -----------------------------------------------------------------------------

// Start Related

bool smStart(void) {
    ...
}

bool smIsRunning(void) {
    ...
}

// State Functions

bool smCreateState(const char *name, smEnterFn enterFn,
```

<br>

### â€” _Headers_

1. All headers must have inclusion guards

// âœ… Do
#ifndef SMILE_MODULE_NAME_H
#define SMILE_MODULE_NAME_H
// ... header content ...
#endif // SMILE_MODULE_NAME_H

============================================================

4. Add include order convention

// System headers first
#include <stdio.h>
#include <stdlib.h>

// Then project headers  
#include "smStateMachine.h"
#include "lgLog.h"

// Then internal headers
#include "smStateMachineInternal.h"

============================================================

â¤ â€œHeader Dependenciesâ€

	â€¢	Every header should include everything it needs (no implicit dependencies).
	â€¢	Never rely on transitive includes.

#### Public Headers

* naming

Public API Functions: [modulePrefix][Verb][Object]

**Example**

```c
```

<br>

For documenting Public Headers, see [Documenting Public Headers]() in
the [Documentation Guidelines]() doc.

<br>

#### Internal Headers

* Logging Related

Internal Functions: [modulePrefix]Internal[Verb][Object]

**Example**

```c
```

<br>

For documenting Internal Headers, see [Documenting Internal Headers]() in
the [Documentation Guidelines]() doc.

<br>

### â€” _Message Files_

* Logging Related

2. Module Message Files
   Every module has a <ModuleName>Messages.h file containing:

- Module name
- Function names (FN_* defines)
- Causes
- Consequences
  CommonMessages.h contains cross-module messages.

**Example**

```c
```

<br>

For documenting Message Files, see [Documenting Message Files]() in
the [Documentation Guidelines]() doc.

<br>

### â€” _Source Files_

* logs

Log Message Pattern
Every log for errors, warnings, or info follows a structured pattern:
logLevel, moduleName, cause, optionalArgument, functionName, consequence

static void helperFunc(void) { // File scope function

**Example**

```c
```

<br>

* private funcs

Private Functions: [modulePrefix]Private[Description]

**Example**

```c
```

<br>

For documenting Source Files, see [Documenting Source Files]() in
the [Documentation Guidelines]() doc.

---

<br>

## Up Next

[2.2_Coding Guidelines - General Conventions](2.2_Coding_Guidelines_General_Conventions.md)

---

<br>

| Last modified | Author        | Description       |
|---------------|---------------|-------------------|
| Oct 18, 2025  | Vitor Betmann | Created document. |